{"ast":null,"code":"var _jsxFileName = \"/home/johanna/InsureDisruption/Frontend/insuredisrupt/src/pages/Oracle.js\";\nimport React, { Component } from \"react\";\nimport Web3 from \"web3\";\nimport { CONTRACT_ADDRESS, ABI, CONTRACT_ERC20_CHAINLINK_ADDRESS, CHAINLINK_ABI } from \"../config\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\nimport ErrorModal from \"../components/ErrorModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Oracle extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = _ref => {\n      let {\n        target: {\n          contractAddrToCopy\n        }\n      } = _ref;\n      this.setState({\n        contractAddrToCopy,\n        copied: false\n      });\n    };\n\n    this.onCopy = () => {\n      this.setState({\n        copied: true\n      });\n    };\n\n    this.state = {\n      account: this.props.account,\n      successMsg: \"\",\n      availableEth: \"\",\n      volcanoContract: null,\n      yearEruption: null,\n      monthEruption: null,\n      dayEruption: null,\n      country: \"Iceland\",\n      yearUserInput: \"1727\",\n      monthUserInput: \"08\",\n      dayUserInput: \"03\",\n      yearPresent: null,\n      monthPresent: null,\n      dayPresent: null,\n      latEruption: null,\n      longEruption: null,\n      urlJSON: null,\n      copied: false,\n      value: \"\",\n      chainlinkBalance: \"\",\n      chainlinkContract: \"\",\n      errorMsg: \"\",\n      copied: false,\n      contractAddrToCopy: CONTRACT_ADDRESS,\n      loading: false\n    };\n  }\n\n  componentDidMount() {\n    this.loadBlockchainData();\n    this.handleChangeUserInput = this.handleChangeUserInput.bind(this);\n    this.handleRequestTimeNow = this.handleRequestTimeNow.bind(this);\n    this.handleRequestEruptionCoordinates = this.handleRequestEruptionCoordinates.bind(this);\n    console.log(this.props, \"Props in Oracle.js\");\n  }\n\n  async loadBlockchainData() {\n    const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\"); //const network = await web3.eth.net.getNetworkType();\n    //await window.ethereum.enable();\n\n    const volcanoContract = new web3.eth.Contract(ABI, CONTRACT_ADDRESS);\n    this.setState({\n      volcanoContract: volcanoContract\n    }); //Load the chainlink contract\n\n    const chainlinkContract = new web3.eth.Contract(CHAINLINK_ABI, CONTRACT_ERC20_CHAINLINK_ADDRESS);\n    this.setState({\n      chainlinkContract: chainlinkContract\n    });\n    this.setInitialValues(volcanoContract, chainlinkContract);\n    this.eventListener(volcanoContract);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.account !== this.props.account) {\n      this.loadBlockchainData();\n    }\n  }\n\n  setInitialValues(volcanoContract, chainlinkContract) {\n    volcanoContract.methods.YearPresent().call().then(res => {\n      this.setState({\n        yearPresent: res\n      });\n      console.log(this.state.yearPresent, \"YEAR present\");\n    });\n    volcanoContract.methods.MonthPresent().call().then(res => {\n      this.setState({\n        monthPresent: res\n      });\n      console.log(this.state.monthPresent, \"MONTH present\");\n    });\n    volcanoContract.methods.DayPresent().call().then(res => {\n      this.setState({\n        dayPresent: res\n      });\n      console.log(this.state.dayPresent, \"DAY present\");\n    }); //get initial long/lats/year/month/day of eruption\n\n    volcanoContract.methods.YearEruption().call().then(res => {\n      this.setState({\n        yearEruption: res\n      });\n      console.log(this.state.yearEruption, \"YEAR eruption\");\n    });\n    volcanoContract.methods.MonthEruption().call().then(res => {\n      this.setState({\n        monthEruption: res\n      });\n      console.log(this.state.monthEruption, \"MONTH eruption\");\n    });\n    volcanoContract.methods.DayEruption().call().then(res => {\n      this.setState({\n        dayEruption: res\n      });\n      console.log(this.state.dayEruption, \"DAY eruption\");\n    });\n    volcanoContract.methods.LatitudeEruption().call().then(res => {\n      this.setState({\n        latEruption: res\n      });\n      console.log(this.state.latEruption, \"latEruption\");\n    });\n    volcanoContract.methods.LongitudeEruption().call().then(res => {\n      this.setState({\n        longEruption: res\n      });\n      console.log(this.state.longEruption, \"longEruption\");\n    }); //initial state of url\n\n    volcanoContract.methods.urlRebuiltJSON().call().then(res => {\n      this.setState({\n        urlJSON: res\n      });\n      console.log(this.state.urlJSON, \"longEruption\");\n    }); //get chainlink balance\n\n    chainlinkContract.methods.balanceOf(CONTRACT_ADDRESS).call().then(res => {\n      this.setState({\n        chainlinkBalance: res\n      });\n      console.log(this.state.chainlinkBalance, \"chainlinkBalance\");\n    });\n  }\n\n  eventListener(volcanoContract) {\n    let that = this;\n    volcanoContract.events.recordMessageSender({\n      fromBlock: \"latest\"\n    }, function (error, eventResult) {}).on(\"data\", function (eventResult) {\n      //Call the get function to get the most accurate present state for the value.\n      that.setInitialValues(volcanoContract, that.state.chainlinkContract); //Do a wait 30s here\n\n      that.setState({\n        loading: false\n      });\n      console.log(\"eventlistner triggered!\");\n    }).on(\"changed\", function (eventResult) {// remove event from local database\n    }).on(\"error\", console.error);\n  }\n\n  handleChangeUserInput(event) {\n    let value = event.target.value;\n    let name = event.target.dataset.name;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleRequestTimeNow() {\n    if (this.props.account[0]) {\n      console.log(\"Buuuuu set contract\", this.state.volcanoContract);\n      let web3js = new Web3(window.web3.currentProvider);\n      web3js.eth.sendTransaction({\n        to: CONTRACT_ADDRESS,\n        data: this.state.volcanoContract.methods.OracleRequestPresentTime().encodeABI(),\n        from: this.props.account[0]\n      }); //Todo: get the values from eventlistener\n      //YearPresent(); MonthPresent(); DayPresent()\n\n      this.setState({\n        loading: true\n      });\n    } else {\n      this.setState({\n        errorMsg: \"You have to connect to metamask!\"\n      });\n    }\n  }\n\n  handleRequestEruptionCoordinates() {\n    if (this.props.account[0]) {\n      const {\n        yearUserInput,\n        monthUserInput,\n        dayUserInput,\n        country\n      } = this.state;\n      console.log(yearUserInput, monthUserInput, dayUserInput, \"USER INPUT in handlerequesteruptioncordinates\");\n      let web3js = new Web3(window.web3.currentProvider);\n      web3js.eth.sendTransaction({\n        to: CONTRACT_ADDRESS,\n        data: this.state.volcanoContract.methods.OracleRequestVolcanoEruptionData(yearUserInput, monthUserInput, dayUserInput, country).encodeABI(),\n        from: this.props.account[0]\n      });\n      this.setState({\n        loading: true\n      });\n    } else {\n      this.setState({\n        errorMsg: \"You have to connect to metamask!\"\n      });\n    }\n\n    this.setState({\n      loading: true\n    });\n  }\n\n  _whenToRenderSpinner() {\n    if (this.state.loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"spinner-border text-light\",\n        role: \"status\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 11\n      }, this);\n    }\n  }\n\n  _renderCopyAddress() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"contract-addr\",\n        onChange: this.onChange,\n        disabled: \"true\",\n        value: this.state.contractAddrToCopy\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(CopyToClipboard, {\n        onCopy: this.onCopy,\n        text: this.state.contractAddrToCopy,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-dark-copy\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            class: \"sc-jaq3xr-1 doRNia\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              width: \"16\",\n              height: \"16\",\n              viewBox: \"0 0 24 24\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              \"stroke-width\": \"2\",\n              \"stroke-linecap\": \"round\",\n              \"stroke-linejoin\": \"round\",\n              children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n                x: \"9\",\n                y: \"9\",\n                width: \"13\",\n                height: \"13\",\n                rx: \"2\",\n                ry: \"2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 7\n          }, this), \" \", \"Copy Contract Address\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 4\n    }, this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App-background\",\n      children: [this.state.errorMsg ? /*#__PURE__*/_jsxDEV(ErrorModal, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 28\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"center-container-buy \",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: \"Oracle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          class: \"form-container-buy\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"available-eth-container owner\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"CONTRACT ADDRESS\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"contract-addr-container\",\n                children: this._renderCopyAddress()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n                style: {\n                  textAlign: \"center\"\n                },\n                className: \"v-txt\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"contract chainlink balance\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 10\n                }, this), this.state.chainlinkBalance / 1000000000000000000]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 8\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Current Date [GMT]:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 7\n          }, this), this.state.loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              textAlign: \"center\"\n            },\n            className: \"v-txt\",\n            children: this._whenToRenderSpinner()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 8\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              textAlign: \"center\"\n            },\n            className: \"v-txt\",\n            children: this.state.yearPresent + \"/\" + this.state.monthPresent + \"/\" + this.state.dayPresent\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            class: \"btn btn-dark-request-time\",\n            onClick: this.handleRequestTimeNow,\n            children: [\"Request Time Now\", /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"[0.05 LINK]\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                textAlign: \"center\"\n              },\n              children: [\"Lat:\", \" \", this.state.latEruption + \" Long: \" + this.state.longEruption]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Eruption Date:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: this.state.yearEruption + \"/\" + this.state.monthEruption + \"/\" + this.state.dayEruption\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"url-container\",\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"url-json\",\n                href: this.state.urlJSON,\n                target: \"_blank\",\n                children: \"Link to Volcano Data\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 378,\n                columnNumber: 9\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container oracle\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"label-input-container-oracle\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"lat\",\n                children: \"Year\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 391,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Year\",\n                onChange: this.handleChangeUserInput,\n                \"data-name\": \"yearUserInput\",\n                value: this.state.yearUserInput\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"label-input-container-oracle\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"long\",\n                children: \"Month\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Month\",\n                onChange: this.handleChangeUserInput,\n                \"data-name\": \"monthUserInput\",\n                value: this.state.monthUserInput\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"label-input-container-oracle\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"long\",\n                children: \"Day\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Day\",\n                onChange: this.handleChangeUserInput,\n                \"data-name\": \"dayUserInput\",\n                value: this.state.dayUserInput\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 412,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 8\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"label-input-container-oracle\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"long\",\n                children: \"Country\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 9\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Country\",\n                onChange: this.handleChangeUserInput,\n                \"data-name\": \"country\",\n                value: this.state.country\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 9\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            class: \"btn btn-dark-request-eruption\",\n            onClick: this.handleRequestEruptionCoordinates,\n            children: [\"Request Volcano Eruption Data\", /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"[0.05 LINK]\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 8\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 7\n          }, this), this.state.loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: this._whenToRenderSpinner()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 8\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nexport default Oracle;","map":{"version":3,"sources":["/home/johanna/InsureDisruption/Frontend/insuredisrupt/src/pages/Oracle.js"],"names":["React","Component","Web3","CONTRACT_ADDRESS","ABI","CONTRACT_ERC20_CHAINLINK_ADDRESS","CHAINLINK_ABI","CopyToClipboard","ErrorModal","Oracle","constructor","props","onChange","target","contractAddrToCopy","setState","copied","onCopy","state","account","successMsg","availableEth","volcanoContract","yearEruption","monthEruption","dayEruption","country","yearUserInput","monthUserInput","dayUserInput","yearPresent","monthPresent","dayPresent","latEruption","longEruption","urlJSON","value","chainlinkBalance","chainlinkContract","errorMsg","loading","componentDidMount","loadBlockchainData","handleChangeUserInput","bind","handleRequestTimeNow","handleRequestEruptionCoordinates","console","log","web3","givenProvider","eth","Contract","setInitialValues","eventListener","componentDidUpdate","prevProps","prevState","methods","YearPresent","call","then","res","MonthPresent","DayPresent","YearEruption","MonthEruption","DayEruption","LatitudeEruption","LongitudeEruption","urlRebuiltJSON","balanceOf","that","events","recordMessageSender","fromBlock","error","eventResult","on","event","name","dataset","web3js","window","currentProvider","sendTransaction","to","data","OracleRequestPresentTime","encodeABI","from","OracleRequestVolcanoEruptionData","_whenToRenderSpinner","_renderCopyAddress","render","textAlign"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,SACCC,gBADD,EAECC,GAFD,EAGCC,gCAHD,EAICC,aAJD,QAKO,WALP;AAMA,SAASC,eAAT,QAAgC,yBAAhC;AACA,OAAOC,UAAP,MAAuB,0BAAvB;;;AAEA,MAAMC,MAAN,SAAqBR,SAArB,CAA+B;AAC9BS,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;;AADkB,SA2OnBC,QA3OmB,GA2OR,QAAwC;AAAA,UAAvC;AAAEC,QAAAA,MAAM,EAAE;AAAEC,UAAAA;AAAF;AAAV,OAAuC;AAClD,WAAKC,QAAL,CAAc;AAAED,QAAAA,kBAAF;AAAsBE,QAAAA,MAAM,EAAE;AAA9B,OAAd;AACA,KA7OkB;;AAAA,SA+OnBC,MA/OmB,GA+OV,MAAM;AACd,WAAKF,QAAL,CAAc;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAAd;AACA,KAjPkB;;AAElB,SAAKE,KAAL,GAAa;AACZC,MAAAA,OAAO,EAAE,KAAKR,KAAL,CAAWQ,OADR;AAEZC,MAAAA,UAAU,EAAE,EAFA;AAGZC,MAAAA,YAAY,EAAE,EAHF;AAIZC,MAAAA,eAAe,EAAE,IAJL;AAKZC,MAAAA,YAAY,EAAE,IALF;AAMZC,MAAAA,aAAa,EAAE,IANH;AAOZC,MAAAA,WAAW,EAAE,IAPD;AAQZC,MAAAA,OAAO,EAAE,SARG;AASZC,MAAAA,aAAa,EAAE,MATH;AAUZC,MAAAA,cAAc,EAAE,IAVJ;AAWZC,MAAAA,YAAY,EAAE,IAXF;AAYZC,MAAAA,WAAW,EAAE,IAZD;AAaZC,MAAAA,YAAY,EAAE,IAbF;AAcZC,MAAAA,UAAU,EAAE,IAdA;AAeZC,MAAAA,WAAW,EAAE,IAfD;AAgBZC,MAAAA,YAAY,EAAE,IAhBF;AAiBZC,MAAAA,OAAO,EAAE,IAjBG;AAkBZnB,MAAAA,MAAM,EAAE,KAlBI;AAmBZoB,MAAAA,KAAK,EAAE,EAnBK;AAoBZC,MAAAA,gBAAgB,EAAE,EApBN;AAqBZC,MAAAA,iBAAiB,EAAE,EArBP;AAsBZC,MAAAA,QAAQ,EAAE,EAtBE;AAuBZvB,MAAAA,MAAM,EAAE,KAvBI;AAwBZF,MAAAA,kBAAkB,EAAEX,gBAxBR;AAyBZqC,MAAAA,OAAO,EAAE;AAzBG,KAAb;AA2BA;;AAEDC,EAAAA,iBAAiB,GAAG;AACnB,SAAKC,kBAAL;AACA,SAAKC,qBAAL,GAA6B,KAAKA,qBAAL,CAA2BC,IAA3B,CAAgC,IAAhC,CAA7B;AACA,SAAKC,oBAAL,GAA4B,KAAKA,oBAAL,CAA0BD,IAA1B,CAA+B,IAA/B,CAA5B;AACA,SAAKE,gCAAL,GACC,KAAKA,gCAAL,CAAsCF,IAAtC,CAA2C,IAA3C,CADD;AAEAG,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKrC,KAAjB,EAAwB,oBAAxB;AACA;;AAEuB,QAAlB+B,kBAAkB,GAAG;AAC1B,UAAMO,IAAI,GAAG,IAAI/C,IAAJ,CAASA,IAAI,CAACgD,aAAL,IAAsB,uBAA/B,CAAb,CAD0B,CAE1B;AACA;;AACA,UAAM5B,eAAe,GAAG,IAAI2B,IAAI,CAACE,GAAL,CAASC,QAAb,CAAsBhD,GAAtB,EAA2BD,gBAA3B,CAAxB;AACA,SAAKY,QAAL,CAAc;AAAEO,MAAAA,eAAe,EAAEA;AAAnB,KAAd,EAL0B,CAO1B;;AACA,UAAMgB,iBAAiB,GAAG,IAAIW,IAAI,CAACE,GAAL,CAASC,QAAb,CACzB9C,aADyB,EAEzBD,gCAFyB,CAA1B;AAIA,SAAKU,QAAL,CAAc;AAAEuB,MAAAA,iBAAiB,EAAEA;AAArB,KAAd;AAEA,SAAKe,gBAAL,CAAsB/B,eAAtB,EAAuCgB,iBAAvC;AACA,SAAKgB,aAAL,CAAmBhC,eAAnB;AACA;;AAEDiC,EAAAA,kBAAkB,CAACC,SAAD,EAAYC,SAAZ,EAAuB;AACxC,QAAID,SAAS,CAACrC,OAAV,KAAsB,KAAKR,KAAL,CAAWQ,OAArC,EAA8C;AAC7C,WAAKuB,kBAAL;AACA;AACD;;AAEDW,EAAAA,gBAAgB,CAAC/B,eAAD,EAAkBgB,iBAAlB,EAAqC;AACpDhB,IAAAA,eAAe,CAACoC,OAAhB,CACEC,WADF,GAEEC,IAFF,GAGEC,IAHF,CAGQC,GAAD,IAAS;AACd,WAAK/C,QAAL,CAAc;AAAEe,QAAAA,WAAW,EAAEgC;AAAf,OAAd;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK9B,KAAL,CAAWY,WAAvB,EAAoC,cAApC;AACA,KANF;AAQAR,IAAAA,eAAe,CAACoC,OAAhB,CACEK,YADF,GAEEH,IAFF,GAGEC,IAHF,CAGQC,GAAD,IAAS;AACd,WAAK/C,QAAL,CAAc;AAAEgB,QAAAA,YAAY,EAAE+B;AAAhB,OAAd;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK9B,KAAL,CAAWa,YAAvB,EAAqC,eAArC;AACA,KANF;AAQAT,IAAAA,eAAe,CAACoC,OAAhB,CACEM,UADF,GAEEJ,IAFF,GAGEC,IAHF,CAGQC,GAAD,IAAS;AACd,WAAK/C,QAAL,CAAc;AAAEiB,QAAAA,UAAU,EAAE8B;AAAd,OAAd;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK9B,KAAL,CAAWc,UAAvB,EAAmC,aAAnC;AACA,KANF,EAjBoD,CAyBpD;;AACAV,IAAAA,eAAe,CAACoC,OAAhB,CACEO,YADF,GAEEL,IAFF,GAGEC,IAHF,CAGQC,GAAD,IAAS;AACd,WAAK/C,QAAL,CAAc;AAAEQ,QAAAA,YAAY,EAAEuC;AAAhB,OAAd;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK9B,KAAL,CAAWK,YAAvB,EAAqC,eAArC;AACA,KANF;AAQAD,IAAAA,eAAe,CAACoC,OAAhB,CACEQ,aADF,GAEEN,IAFF,GAGEC,IAHF,CAGQC,GAAD,IAAS;AACd,WAAK/C,QAAL,CAAc;AAAES,QAAAA,aAAa,EAAEsC;AAAjB,OAAd;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK9B,KAAL,CAAWM,aAAvB,EAAsC,gBAAtC;AACA,KANF;AAQAF,IAAAA,eAAe,CAACoC,OAAhB,CACES,WADF,GAEEP,IAFF,GAGEC,IAHF,CAGQC,GAAD,IAAS;AACd,WAAK/C,QAAL,CAAc;AAAEU,QAAAA,WAAW,EAAEqC;AAAf,OAAd;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK9B,KAAL,CAAWO,WAAvB,EAAoC,cAApC;AACA,KANF;AAQAH,IAAAA,eAAe,CAACoC,OAAhB,CACEU,gBADF,GAEER,IAFF,GAGEC,IAHF,CAGQC,GAAD,IAAS;AACd,WAAK/C,QAAL,CAAc;AAAEkB,QAAAA,WAAW,EAAE6B;AAAf,OAAd;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK9B,KAAL,CAAWe,WAAvB,EAAoC,aAApC;AACA,KANF;AAQAX,IAAAA,eAAe,CAACoC,OAAhB,CACEW,iBADF,GAEET,IAFF,GAGEC,IAHF,CAGQC,GAAD,IAAS;AACd,WAAK/C,QAAL,CAAc;AAAEmB,QAAAA,YAAY,EAAE4B;AAAhB,OAAd;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK9B,KAAL,CAAWgB,YAAvB,EAAqC,cAArC;AACA,KANF,EA1DoD,CAkEpD;;AACAZ,IAAAA,eAAe,CAACoC,OAAhB,CACEY,cADF,GAEEV,IAFF,GAGEC,IAHF,CAGQC,GAAD,IAAS;AACd,WAAK/C,QAAL,CAAc;AAAEoB,QAAAA,OAAO,EAAE2B;AAAX,OAAd;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK9B,KAAL,CAAWiB,OAAvB,EAAgC,cAAhC;AACA,KANF,EAnEoD,CA2EpD;;AACAG,IAAAA,iBAAiB,CAACoB,OAAlB,CACEa,SADF,CACYpE,gBADZ,EAEEyD,IAFF,GAGEC,IAHF,CAGQC,GAAD,IAAS;AACd,WAAK/C,QAAL,CAAc;AAAEsB,QAAAA,gBAAgB,EAAEyB;AAApB,OAAd;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK9B,KAAL,CAAWmB,gBAAvB,EAAyC,kBAAzC;AACA,KANF;AAOA;;AAEDiB,EAAAA,aAAa,CAAChC,eAAD,EAAkB;AAC9B,QAAIkD,IAAI,GAAG,IAAX;AACAlD,IAAAA,eAAe,CAACmD,MAAhB,CACEC,mBADF,CAEE;AACCC,MAAAA,SAAS,EAAE;AADZ,KAFF,EAKE,UAAUC,KAAV,EAAiBC,WAAjB,EAA8B,CAAE,CALlC,EAOEC,EAPF,CAOK,MAPL,EAOa,UAAUD,WAAV,EAAuB;AAClC;AACAL,MAAAA,IAAI,CAACnB,gBAAL,CACC/B,eADD,EAECkD,IAAI,CAACtD,KAAL,CAAWoB,iBAFZ,EAFkC,CAOlC;;AACAkC,MAAAA,IAAI,CAACzD,QAAL,CAAc;AAAEyB,QAAAA,OAAO,EAAE;AAAX,OAAd;AACAO,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACA,KAjBF,EAkBE8B,EAlBF,CAkBK,SAlBL,EAkBgB,UAAUD,WAAV,EAAuB,CACrC;AACA,KApBF,EAqBEC,EArBF,CAqBK,OArBL,EAqBc/B,OAAO,CAAC6B,KArBtB;AAsBA;;AAEDjC,EAAAA,qBAAqB,CAACoC,KAAD,EAAQ;AAC5B,QAAI3C,KAAK,GAAG2C,KAAK,CAAClE,MAAN,CAAauB,KAAzB;AACA,QAAI4C,IAAI,GAAGD,KAAK,CAAClE,MAAN,CAAaoE,OAAb,CAAqBD,IAAhC;AACA,SAAKjE,QAAL,CAAc;AAAE,OAACiE,IAAD,GAAQ5C;AAAV,KAAd;AACA;;AAEDS,EAAAA,oBAAoB,GAAG;AACtB,QAAI,KAAKlC,KAAL,CAAWQ,OAAX,CAAmB,CAAnB,CAAJ,EAA2B;AAC1B4B,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmC,KAAK9B,KAAL,CAAWI,eAA9C;AACA,UAAI4D,MAAM,GAAG,IAAIhF,IAAJ,CAASiF,MAAM,CAAClC,IAAP,CAAYmC,eAArB,CAAb;AACAF,MAAAA,MAAM,CAAC/B,GAAP,CAAWkC,eAAX,CAA2B;AAC1BC,QAAAA,EAAE,EAAEnF,gBADsB;AAE1BoF,QAAAA,IAAI,EAAE,KAAKrE,KAAL,CAAWI,eAAX,CAA2BoC,OAA3B,CACJ8B,wBADI,GAEJC,SAFI,EAFoB;AAK1BC,QAAAA,IAAI,EAAE,KAAK/E,KAAL,CAAWQ,OAAX,CAAmB,CAAnB;AALoB,OAA3B,EAH0B,CAU1B;AACA;;AACA,WAAKJ,QAAL,CAAc;AAAEyB,QAAAA,OAAO,EAAE;AAAX,OAAd;AACA,KAbD,MAaO;AACN,WAAKzB,QAAL,CAAc;AACbwB,QAAAA,QAAQ,EAAE;AADG,OAAd;AAGA;AACD;;AAEDO,EAAAA,gCAAgC,GAAG;AAClC,QAAI,KAAKnC,KAAL,CAAWQ,OAAX,CAAmB,CAAnB,CAAJ,EAA2B;AAC1B,YAAM;AAAEQ,QAAAA,aAAF;AAAiBC,QAAAA,cAAjB;AAAiCC,QAAAA,YAAjC;AAA+CH,QAAAA;AAA/C,UACL,KAAKR,KADN;AAEA6B,MAAAA,OAAO,CAACC,GAAR,CACCrB,aADD,EAECC,cAFD,EAGCC,YAHD,EAIC,+CAJD;AAMA,UAAIqD,MAAM,GAAG,IAAIhF,IAAJ,CAASiF,MAAM,CAAClC,IAAP,CAAYmC,eAArB,CAAb;AACAF,MAAAA,MAAM,CAAC/B,GAAP,CAAWkC,eAAX,CAA2B;AAC1BC,QAAAA,EAAE,EAAEnF,gBADsB;AAE1BoF,QAAAA,IAAI,EAAE,KAAKrE,KAAL,CAAWI,eAAX,CAA2BoC,OAA3B,CACJiC,gCADI,CAEJhE,aAFI,EAGJC,cAHI,EAIJC,YAJI,EAKJH,OALI,EAOJ+D,SAPI,EAFoB;AAU1BC,QAAAA,IAAI,EAAE,KAAK/E,KAAL,CAAWQ,OAAX,CAAmB,CAAnB;AAVoB,OAA3B;AAYA,WAAKJ,QAAL,CAAc;AAAEyB,QAAAA,OAAO,EAAE;AAAX,OAAd;AACA,KAvBD,MAuBO;AACN,WAAKzB,QAAL,CAAc;AACbwB,QAAAA,QAAQ,EAAE;AADG,OAAd;AAGA;;AAED,SAAKxB,QAAL,CAAc;AAAEyB,MAAAA,OAAO,EAAE;AAAX,KAAd;AACA;;AAUDoD,EAAAA,oBAAoB,GAAG;AACtB,QAAI,KAAK1E,KAAL,CAAWsB,OAAf,EAAwB;AACvB,0BAAO;AAAK,QAAA,KAAK,EAAC,2BAAX;AAAuC,QAAA,IAAI,EAAC;AAA5C;AAAA;AAAA;AAAA;AAAA,cAAP;AACA;AACD;;AAEDqD,EAAAA,kBAAkB,GAAG;AACpB,wBACC;AAAA,8BACC;AACC,QAAA,SAAS,EAAC,eADX;AAEC,QAAA,QAAQ,EAAE,KAAKjF,QAFhB;AAGC,QAAA,QAAQ,EAAC,MAHV;AAIC,QAAA,KAAK,EAAE,KAAKM,KAAL,CAAWJ;AAJnB;AAAA;AAAA;AAAA;AAAA,cADD,eAQC,QAAC,eAAD;AACC,QAAA,MAAM,EAAE,KAAKG,MADd;AAEC,QAAA,IAAI,EAAE,KAAKC,KAAL,CAAWJ,kBAFlB;AAAA,+BAIC;AAAQ,UAAA,SAAS,EAAC,mBAAlB;AAAA,kCACC;AAAM,YAAA,KAAK,EAAC,oBAAZ;AAAA,mCACC;AACC,cAAA,KAAK,EAAC,4BADP;AAEC,cAAA,KAAK,EAAC,IAFP;AAGC,cAAA,MAAM,EAAC,IAHR;AAIC,cAAA,OAAO,EAAC,WAJT;AAKC,cAAA,IAAI,EAAC,MALN;AAMC,cAAA,MAAM,EAAC,cANR;AAOC,8BAAa,GAPd;AAQC,gCAAe,OARhB;AASC,iCAAgB,OATjB;AAAA,sCAWC;AACC,gBAAA,CAAC,EAAC,GADH;AAEC,gBAAA,CAAC,EAAC,GAFH;AAGC,gBAAA,KAAK,EAAC,IAHP;AAIC,gBAAA,MAAM,EAAC,IAJR;AAKC,gBAAA,EAAE,EAAC,GALJ;AAMC,gBAAA,EAAE,EAAC;AANJ;AAAA;AAAA;AAAA;AAAA,sBAXD,eAmBC;AAAM,gBAAA,CAAC,EAAC;AAAR;AAAA;AAAA;AAAA;AAAA,sBAnBD;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,kBADD,EAuBS,GAvBT;AAAA;AAAA;AAAA;AAAA;AAAA;AAJD;AAAA;AAAA;AAAA;AAAA,cARD;AAAA;AAAA;AAAA;AAAA;AAAA,YADD;AA0CA;;AAEDgF,EAAAA,MAAM,GAAG;AACR,wBACC;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA,iBACE,KAAK5E,KAAL,CAAWqB,QAAX,gBAAsB,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,cAAtB,GAAuC,IADzC,eAEC;AAAK,QAAA,SAAS,EAAC,uBAAf;AAAA,gCACC;AAAI,UAAA,KAAK,EAAE;AAAEwD,YAAAA,SAAS,EAAE;AAAb,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADD,eAEC;AAAM,UAAA,KAAK,EAAC,oBAAZ;AAAA,kCACC;AAAA,mCACC;AAAK,cAAA,KAAK,EAAC,+BAAX;AAAA,sCACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADD,eAEC;AAAK,gBAAA,SAAS,EAAC,yBAAf;AAAA,0BACE,KAAKF,kBAAL;AADF;AAAA;AAAA;AAAA;AAAA,sBAFD,eAKC;AACC,gBAAA,KAAK,EAAE;AAAEE,kBAAAA,SAAS,EAAE;AAAb,iBADR;AAEC,gBAAA,SAAS,EAAC,OAFX;AAAA,wCAIC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAJD,EAKE,KAAK7E,KAAL,CAAWmB,gBAAX,GACA,mBANF;AAAA;AAAA;AAAA;AAAA;AAAA,sBALD;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,kBADD,eAiBC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAjBD,EAmBE,KAAKnB,KAAL,CAAWsB,OAAX,gBACA;AACC,YAAA,KAAK,EAAE;AAAEuD,cAAAA,SAAS,EAAE;AAAb,aADR;AAEC,YAAA,SAAS,EAAC,OAFX;AAAA,sBAIE,KAAKH,oBAAL;AAJF;AAAA;AAAA;AAAA;AAAA,kBADA,gBAQA;AACC,YAAA,KAAK,EAAE;AAAEG,cAAAA,SAAS,EAAE;AAAb,aADR;AAEC,YAAA,SAAS,EAAC,OAFX;AAAA,sBAIE,KAAK7E,KAAL,CAAWY,WAAX,GACA,GADA,GAEA,KAAKZ,KAAL,CAAWa,YAFX,GAGA,GAHA,GAIA,KAAKb,KAAL,CAAWc;AARb;AAAA;AAAA;AAAA;AAAA,kBA3BF,eAuCC;AACC,YAAA,IAAI,EAAC,QADN;AAEC,YAAA,KAAK,EAAC,2BAFP;AAGC,YAAA,OAAO,EAAE,KAAKa,oBAHf;AAAA,wDAMC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAND;AAAA;AAAA;AAAA;AAAA;AAAA,kBAvCD,eAgDC;AAAA,oCACC;AAAI,cAAA,KAAK,EAAE;AAAEkD,gBAAAA,SAAS,EAAE;AAAb,eAAX;AAAA,iCACM,GADN,EAEE,KAAK7E,KAAL,CAAWe,WAAX,GACA,SADA,GAEA,KAAKf,KAAL,CAAWgB,YAJb;AAAA;AAAA;AAAA;AAAA;AAAA,oBADD,eAQC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBARD,eASC;AAAA,wBACE,KAAKhB,KAAL,CAAWK,YAAX,GACA,GADA,GAEA,KAAKL,KAAL,CAAWM,aAFX,GAGA,GAHA,GAIA,KAAKN,KAAL,CAAWO;AALb;AAAA;AAAA;AAAA;AAAA,oBATD,eAgBC;AAAK,cAAA,SAAS,EAAC,eAAf;AAAA,qCACC;AACC,gBAAA,SAAS,EAAC,UADX;AAEC,gBAAA,IAAI,EAAE,KAAKP,KAAL,CAAWiB,OAFlB;AAGC,gBAAA,MAAM,EAAC,QAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,oBAhBD,eA0BC;AAAA;AAAA;AAAA;AAAA,oBA1BD;AAAA;AAAA;AAAA;AAAA;AAAA,kBAhDD,eA4EC;AAAK,YAAA,SAAS,EAAC,kBAAf;AAAA,oCACC;AAAK,cAAA,KAAK,EAAC,8BAAX;AAAA,sCACC;AAAO,gBAAA,GAAG,EAAC,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADD,eAEC;AACC,gBAAA,IAAI,EAAC,MADN;AAEC,gBAAA,WAAW,EAAC,MAFb;AAGC,gBAAA,QAAQ,EAAE,KAAKQ,qBAHhB;AAIC,6BAAU,eAJX;AAKC,gBAAA,KAAK,EAAE,KAAKzB,KAAL,CAAWS;AALnB;AAAA;AAAA;AAAA;AAAA,sBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,oBADD,eAWC;AAAK,cAAA,KAAK,EAAC,8BAAX;AAAA,sCACC;AAAO,gBAAA,GAAG,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADD,eAEC;AACC,gBAAA,IAAI,EAAC,MADN;AAEC,gBAAA,WAAW,EAAC,OAFb;AAGC,gBAAA,QAAQ,EAAE,KAAKgB,qBAHhB;AAIC,6BAAU,gBAJX;AAKC,gBAAA,KAAK,EAAE,KAAKzB,KAAL,CAAWU;AALnB;AAAA;AAAA;AAAA;AAAA,sBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,oBAXD,eAqBC;AAAK,cAAA,KAAK,EAAC,8BAAX;AAAA,sCACC;AAAO,gBAAA,GAAG,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADD,eAEC;AACC,gBAAA,IAAI,EAAC,MADN;AAEC,gBAAA,WAAW,EAAC,KAFb;AAGC,gBAAA,QAAQ,EAAE,KAAKe,qBAHhB;AAIC,6BAAU,cAJX;AAKC,gBAAA,KAAK,EAAE,KAAKzB,KAAL,CAAWW;AALnB;AAAA;AAAA;AAAA;AAAA,sBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,oBArBD,eA+BC;AAAK,cAAA,KAAK,EAAC,8BAAX;AAAA,sCACC;AAAO,gBAAA,GAAG,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADD,eAEC;AACC,gBAAA,IAAI,EAAC,MADN;AAEC,gBAAA,WAAW,EAAC,SAFb;AAGC,gBAAA,QAAQ,EAAE,KAAKc,qBAHhB;AAIC,6BAAU,SAJX;AAKC,gBAAA,KAAK,EAAE,KAAKzB,KAAL,CAAWQ;AALnB;AAAA;AAAA;AAAA;AAAA,sBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,oBA/BD;AAAA;AAAA;AAAA;AAAA;AAAA,kBA5ED,eAuHC;AACC,YAAA,IAAI,EAAC,QADN;AAEC,YAAA,KAAK,EAAC,+BAFP;AAGC,YAAA,OAAO,EAAE,KAAKoB,gCAHf;AAAA,qEAMC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAND;AAAA;AAAA;AAAA;AAAA;AAAA,kBAvHD,EA+HE,KAAK5B,KAAL,CAAWsB,OAAX,gBACA;AAAA,sBAAI,KAAKoD,oBAAL;AAAJ;AAAA;AAAA;AAAA;AAAA,kBADA,GAEG,IAjIL;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFD;AAAA;AAAA;AAAA;AAAA;AAAA,cAFD;AAAA;AAAA;AAAA;AAAA;AAAA,YADD;AA2IA;;AAnb6B;;AAsb/B,eAAenF,MAAf","sourcesContent":["import React, { Component } from \"react\";\nimport Web3 from \"web3\";\nimport {\n\tCONTRACT_ADDRESS,\n\tABI,\n\tCONTRACT_ERC20_CHAINLINK_ADDRESS,\n\tCHAINLINK_ABI,\n} from \"../config\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\nimport ErrorModal from \"../components/ErrorModal\";\n\nclass Oracle extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\taccount: this.props.account,\n\t\t\tsuccessMsg: \"\",\n\t\t\tavailableEth: \"\",\n\t\t\tvolcanoContract: null,\n\t\t\tyearEruption: null,\n\t\t\tmonthEruption: null,\n\t\t\tdayEruption: null,\n\t\t\tcountry: \"Iceland\",\n\t\t\tyearUserInput: \"1727\",\n\t\t\tmonthUserInput: \"08\",\n\t\t\tdayUserInput: \"03\",\n\t\t\tyearPresent: null,\n\t\t\tmonthPresent: null,\n\t\t\tdayPresent: null,\n\t\t\tlatEruption: null,\n\t\t\tlongEruption: null,\n\t\t\turlJSON: null,\n\t\t\tcopied: false,\n\t\t\tvalue: \"\",\n\t\t\tchainlinkBalance: \"\",\n\t\t\tchainlinkContract: \"\",\n\t\t\terrorMsg: \"\",\n\t\t\tcopied: false,\n\t\t\tcontractAddrToCopy: CONTRACT_ADDRESS,\n\t\t\tloading: false,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadBlockchainData();\n\t\tthis.handleChangeUserInput = this.handleChangeUserInput.bind(this);\n\t\tthis.handleRequestTimeNow = this.handleRequestTimeNow.bind(this);\n\t\tthis.handleRequestEruptionCoordinates =\n\t\t\tthis.handleRequestEruptionCoordinates.bind(this);\n\t\tconsole.log(this.props, \"Props in Oracle.js\");\n\t}\n\n\tasync loadBlockchainData() {\n\t\tconst web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\");\n\t\t//const network = await web3.eth.net.getNetworkType();\n\t\t//await window.ethereum.enable();\n\t\tconst volcanoContract = new web3.eth.Contract(ABI, CONTRACT_ADDRESS);\n\t\tthis.setState({ volcanoContract: volcanoContract });\n\n\t\t//Load the chainlink contract\n\t\tconst chainlinkContract = new web3.eth.Contract(\n\t\t\tCHAINLINK_ABI,\n\t\t\tCONTRACT_ERC20_CHAINLINK_ADDRESS\n\t\t);\n\t\tthis.setState({ chainlinkContract: chainlinkContract });\n\n\t\tthis.setInitialValues(volcanoContract, chainlinkContract);\n\t\tthis.eventListener(volcanoContract);\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tif (prevProps.account !== this.props.account) {\n\t\t\tthis.loadBlockchainData();\n\t\t}\n\t}\n\n\tsetInitialValues(volcanoContract, chainlinkContract) {\n\t\tvolcanoContract.methods\n\t\t\t.YearPresent()\n\t\t\t.call()\n\t\t\t.then((res) => {\n\t\t\t\tthis.setState({ yearPresent: res });\n\t\t\t\tconsole.log(this.state.yearPresent, \"YEAR present\");\n\t\t\t});\n\n\t\tvolcanoContract.methods\n\t\t\t.MonthPresent()\n\t\t\t.call()\n\t\t\t.then((res) => {\n\t\t\t\tthis.setState({ monthPresent: res });\n\t\t\t\tconsole.log(this.state.monthPresent, \"MONTH present\");\n\t\t\t});\n\n\t\tvolcanoContract.methods\n\t\t\t.DayPresent()\n\t\t\t.call()\n\t\t\t.then((res) => {\n\t\t\t\tthis.setState({ dayPresent: res });\n\t\t\t\tconsole.log(this.state.dayPresent, \"DAY present\");\n\t\t\t});\n\n\t\t//get initial long/lats/year/month/day of eruption\n\t\tvolcanoContract.methods\n\t\t\t.YearEruption()\n\t\t\t.call()\n\t\t\t.then((res) => {\n\t\t\t\tthis.setState({ yearEruption: res });\n\t\t\t\tconsole.log(this.state.yearEruption, \"YEAR eruption\");\n\t\t\t});\n\n\t\tvolcanoContract.methods\n\t\t\t.MonthEruption()\n\t\t\t.call()\n\t\t\t.then((res) => {\n\t\t\t\tthis.setState({ monthEruption: res });\n\t\t\t\tconsole.log(this.state.monthEruption, \"MONTH eruption\");\n\t\t\t});\n\n\t\tvolcanoContract.methods\n\t\t\t.DayEruption()\n\t\t\t.call()\n\t\t\t.then((res) => {\n\t\t\t\tthis.setState({ dayEruption: res });\n\t\t\t\tconsole.log(this.state.dayEruption, \"DAY eruption\");\n\t\t\t});\n\n\t\tvolcanoContract.methods\n\t\t\t.LatitudeEruption()\n\t\t\t.call()\n\t\t\t.then((res) => {\n\t\t\t\tthis.setState({ latEruption: res });\n\t\t\t\tconsole.log(this.state.latEruption, \"latEruption\");\n\t\t\t});\n\n\t\tvolcanoContract.methods\n\t\t\t.LongitudeEruption()\n\t\t\t.call()\n\t\t\t.then((res) => {\n\t\t\t\tthis.setState({ longEruption: res });\n\t\t\t\tconsole.log(this.state.longEruption, \"longEruption\");\n\t\t\t});\n\n\t\t//initial state of url\n\t\tvolcanoContract.methods\n\t\t\t.urlRebuiltJSON()\n\t\t\t.call()\n\t\t\t.then((res) => {\n\t\t\t\tthis.setState({ urlJSON: res });\n\t\t\t\tconsole.log(this.state.urlJSON, \"longEruption\");\n\t\t\t});\n\n\t\t//get chainlink balance\n\t\tchainlinkContract.methods\n\t\t\t.balanceOf(CONTRACT_ADDRESS)\n\t\t\t.call()\n\t\t\t.then((res) => {\n\t\t\t\tthis.setState({ chainlinkBalance: res });\n\t\t\t\tconsole.log(this.state.chainlinkBalance, \"chainlinkBalance\");\n\t\t\t});\n\t}\n\n\teventListener(volcanoContract) {\n\t\tlet that = this;\n\t\tvolcanoContract.events\n\t\t\t.recordMessageSender(\n\t\t\t\t{\n\t\t\t\t\tfromBlock: \"latest\",\n\t\t\t\t},\n\t\t\t\tfunction (error, eventResult) {}\n\t\t\t)\n\t\t\t.on(\"data\", function (eventResult) {\n\t\t\t\t//Call the get function to get the most accurate present state for the value.\n\t\t\t\tthat.setInitialValues(\n\t\t\t\t\tvolcanoContract,\n\t\t\t\t\tthat.state.chainlinkContract\n\t\t\t\t);\n\n\t\t\t\t//Do a wait 30s here\n\t\t\t\tthat.setState({ loading: false });\n\t\t\t\tconsole.log(\"eventlistner triggered!\");\n\t\t\t})\n\t\t\t.on(\"changed\", function (eventResult) {\n\t\t\t\t// remove event from local database\n\t\t\t})\n\t\t\t.on(\"error\", console.error);\n\t}\n\n\thandleChangeUserInput(event) {\n\t\tlet value = event.target.value;\n\t\tlet name = event.target.dataset.name;\n\t\tthis.setState({ [name]: value });\n\t}\n\n\thandleRequestTimeNow() {\n\t\tif (this.props.account[0]) {\n\t\t\tconsole.log(\"Buuuuu set contract\", this.state.volcanoContract);\n\t\t\tlet web3js = new Web3(window.web3.currentProvider);\n\t\t\tweb3js.eth.sendTransaction({\n\t\t\t\tto: CONTRACT_ADDRESS,\n\t\t\t\tdata: this.state.volcanoContract.methods\n\t\t\t\t\t.OracleRequestPresentTime()\n\t\t\t\t\t.encodeABI(),\n\t\t\t\tfrom: this.props.account[0],\n\t\t\t});\n\t\t\t//Todo: get the values from eventlistener\n\t\t\t//YearPresent(); MonthPresent(); DayPresent()\n\t\t\tthis.setState({ loading: true });\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\terrorMsg: \"You have to connect to metamask!\",\n\t\t\t});\n\t\t}\n\t}\n\n\thandleRequestEruptionCoordinates() {\n\t\tif (this.props.account[0]) {\n\t\t\tconst { yearUserInput, monthUserInput, dayUserInput, country } =\n\t\t\t\tthis.state;\n\t\t\tconsole.log(\n\t\t\t\tyearUserInput,\n\t\t\t\tmonthUserInput,\n\t\t\t\tdayUserInput,\n\t\t\t\t\"USER INPUT in handlerequesteruptioncordinates\"\n\t\t\t);\n\t\t\tlet web3js = new Web3(window.web3.currentProvider);\n\t\t\tweb3js.eth.sendTransaction({\n\t\t\t\tto: CONTRACT_ADDRESS,\n\t\t\t\tdata: this.state.volcanoContract.methods\n\t\t\t\t\t.OracleRequestVolcanoEruptionData(\n\t\t\t\t\t\tyearUserInput,\n\t\t\t\t\t\tmonthUserInput,\n\t\t\t\t\t\tdayUserInput,\n\t\t\t\t\t\tcountry\n\t\t\t\t\t)\n\t\t\t\t\t.encodeABI(),\n\t\t\t\tfrom: this.props.account[0],\n\t\t\t});\n\t\t\tthis.setState({ loading: true });\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\terrorMsg: \"You have to connect to metamask!\",\n\t\t\t});\n\t\t}\n\n\t\tthis.setState({ loading: true });\n\t}\n\n\tonChange = ({ target: { contractAddrToCopy } }) => {\n\t\tthis.setState({ contractAddrToCopy, copied: false });\n\t};\n\n\tonCopy = () => {\n\t\tthis.setState({ copied: true });\n\t};\n\n\t_whenToRenderSpinner() {\n\t\tif (this.state.loading) {\n\t\t\treturn <div class=\"spinner-border text-light\" role=\"status\"></div>;\n\t\t}\n\t}\n\n\t_renderCopyAddress() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"contract-addr\"\n\t\t\t\t\tonChange={this.onChange}\n\t\t\t\t\tdisabled=\"true\"\n\t\t\t\t\tvalue={this.state.contractAddrToCopy}\n\t\t\t\t/>\n\n\t\t\t\t<CopyToClipboard\n\t\t\t\t\tonCopy={this.onCopy}\n\t\t\t\t\ttext={this.state.contractAddrToCopy}\n\t\t\t\t>\n\t\t\t\t\t<button className=\"btn btn-dark-copy\">\n\t\t\t\t\t\t<span class=\"sc-jaq3xr-1 doRNia\">\n\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\twidth=\"16\"\n\t\t\t\t\t\t\t\theight=\"16\"\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\tx=\"9\"\n\t\t\t\t\t\t\t\t\ty=\"9\"\n\t\t\t\t\t\t\t\t\twidth=\"13\"\n\t\t\t\t\t\t\t\t\theight=\"13\"\n\t\t\t\t\t\t\t\t\trx=\"2\"\n\t\t\t\t\t\t\t\t\try=\"2\"\n\t\t\t\t\t\t\t\t></rect>\n\t\t\t\t\t\t\t\t<path d=\"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\"></path>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</span>{\" \"}\n\t\t\t\t\t\tCopy Contract Address\n\t\t\t\t\t</button>\n\t\t\t\t</CopyToClipboard>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"App-background\">\n\t\t\t\t{this.state.errorMsg ? <ErrorModal /> : null}\n\t\t\t\t<div className=\"center-container-buy \">\n\t\t\t\t\t<h2 style={{ textAlign: \"center\" }}>Oracle</h2>\n\t\t\t\t\t<form class=\"form-container-buy\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div class=\"available-eth-container owner\">\n\t\t\t\t\t\t\t\t<label>CONTRACT ADDRESS</label>\n\t\t\t\t\t\t\t\t<div className=\"contract-addr-container\">\n\t\t\t\t\t\t\t\t\t{this._renderCopyAddress()}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<h6\n\t\t\t\t\t\t\t\t\tstyle={{ textAlign: \"center\" }}\n\t\t\t\t\t\t\t\t\tclassName=\"v-txt\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<label>contract chainlink balance</label>\n\t\t\t\t\t\t\t\t\t{this.state.chainlinkBalance /\n\t\t\t\t\t\t\t\t\t\t1000000000000000000}\n\t\t\t\t\t\t\t\t</h6>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p>Current Date [GMT]:</p>\n\n\t\t\t\t\t\t{this.state.loading ? (\n\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\tstyle={{ textAlign: \"center\" }}\n\t\t\t\t\t\t\t\tclassName=\"v-txt\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{this._whenToRenderSpinner()}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\tstyle={{ textAlign: \"center\" }}\n\t\t\t\t\t\t\t\tclassName=\"v-txt\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{this.state.yearPresent +\n\t\t\t\t\t\t\t\t\t\"/\" +\n\t\t\t\t\t\t\t\t\tthis.state.monthPresent +\n\t\t\t\t\t\t\t\t\t\"/\" +\n\t\t\t\t\t\t\t\t\tthis.state.dayPresent}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tclass=\"btn btn-dark-request-time\"\n\t\t\t\t\t\t\tonClick={this.handleRequestTimeNow}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRequest Time Now\n\t\t\t\t\t\t\t<label>[0.05 LINK]</label>\n\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<h4 style={{ textAlign: \"center\" }}>\n\t\t\t\t\t\t\t\tLat:{\" \"}\n\t\t\t\t\t\t\t\t{this.state.latEruption +\n\t\t\t\t\t\t\t\t\t\" Long: \" +\n\t\t\t\t\t\t\t\t\tthis.state.longEruption}\n\t\t\t\t\t\t\t</h4>\n\n\t\t\t\t\t\t\t<p>Eruption Date:</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t{this.state.yearEruption +\n\t\t\t\t\t\t\t\t\t\"/\" +\n\t\t\t\t\t\t\t\t\tthis.state.monthEruption +\n\t\t\t\t\t\t\t\t\t\"/\" +\n\t\t\t\t\t\t\t\t\tthis.state.dayEruption}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<div className=\"url-container\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"url-json\"\n\t\t\t\t\t\t\t\t\thref={this.state.urlJSON}\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tLink to Volcano Data\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"container oracle\">\n\t\t\t\t\t\t\t<div class=\"label-input-container-oracle\">\n\t\t\t\t\t\t\t\t<label for=\"lat\">Year</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"Year\"\n\t\t\t\t\t\t\t\t\tonChange={this.handleChangeUserInput}\n\t\t\t\t\t\t\t\t\tdata-name=\"yearUserInput\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.yearUserInput}\n\t\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"label-input-container-oracle\">\n\t\t\t\t\t\t\t\t<label for=\"long\">Month</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"Month\"\n\t\t\t\t\t\t\t\t\tonChange={this.handleChangeUserInput}\n\t\t\t\t\t\t\t\t\tdata-name=\"monthUserInput\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.monthUserInput}\n\t\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"label-input-container-oracle\">\n\t\t\t\t\t\t\t\t<label for=\"long\">Day</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"Day\"\n\t\t\t\t\t\t\t\t\tonChange={this.handleChangeUserInput}\n\t\t\t\t\t\t\t\t\tdata-name=\"dayUserInput\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.dayUserInput}\n\t\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"label-input-container-oracle\">\n\t\t\t\t\t\t\t\t<label for=\"long\">Country</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"Country\"\n\t\t\t\t\t\t\t\t\tonChange={this.handleChangeUserInput}\n\t\t\t\t\t\t\t\t\tdata-name=\"country\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.country}\n\t\t\t\t\t\t\t\t></input>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tclass=\"btn btn-dark-request-eruption\"\n\t\t\t\t\t\t\tonClick={this.handleRequestEruptionCoordinates}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tRequest Volcano Eruption Data\n\t\t\t\t\t\t\t<label>[0.05 LINK]</label>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{this.state.loading ? (\n\t\t\t\t\t\t\t<p>{this._whenToRenderSpinner()}</p>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Oracle;\n"]},"metadata":{},"sourceType":"module"}